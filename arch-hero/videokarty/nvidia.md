---
description: –°—Ç–æ—Ä–æ–Ω–∞ –∑–µ–ª–µ–Ω—ã—Ö
---

# üìó NVIDIA

{% hint style="success" %}
–°–æ–≤–µ—Ç—É—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞–∫–µ—Ç–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ _**paru**_. –ö–∞–∫ –µ–≥–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±—ã–ª–æ –ø–æ–∫–∞–∑–∞–Ω–æ –≤ –ø—É–Ω–∫—Ç–µ "**–ü–æ–ª–∏—Ä–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã**".
{% endhint %}

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Nvidia

–î–ª—è –Ω–∞—á–∞–ª–∞ —É—Å—Ç–∞–Ω–æ–≤–∏–º –ø–∞–∫–µ—Ç —Å –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏ linux —è–¥—Ä–∞.

```shell
paru -S linux-headers
```

–¢–µ–ø–µ—Ä—å —É—Å—Ç–∞–Ω–æ–≤–∏–º –ø–∞–∫–µ—Ç—ã, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã –¥—Ä–∞–π–≤–µ—Ä–æ–≤ Nvidia.

```shell
paru -S nvidia-dkms nvidia-utils nvidia-settings opencl-nvidia
```

–ê —Ç–∞–∫–∂–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≥—Ä–∞—Ñ–∏–∫–æ–π.

```shell
paru -S vulkan-icd-loader libglvnd libvdpau libxnvctrl
```

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–æ —Å–∏—Ö –ø–æ—Ä —Ä–∞–±–æ—Ç–∞—é—Ç –≤ 32-–±–∏—Ç–∞. –î–ª—è —Ç–∞–∫–∏—Ö –ø—Ä–æ–≥—Ä–∞–º–º –ø–æ—Å—Ç–∞–≤–∏–º 32-–±–∏—Ç–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –ø–∞–∫–µ—Ç–æ–≤.

```shell
paru -S lib32-nvidia-utils lib32-opencl-nvidia lib32-vulkan-icd-loader
```

## –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Å–∏—Å—Ç–µ–º—É

–°–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ —ç—Ç–æ –≤ —Ñ–∞–π–ª–µ _/etc/mkinitcpio.conf_ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é _**MODULES**_ –¥–æ–±–∞–≤–∏—Ç—å –º–æ–¥—É–ª–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å Nvidia.

```shell
MODULES=(nvidia nvidia_modeset nvidia_uvm nvidia_drm)
```

–í–∫–ª—é—á–∞–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É _**nvidia\_drm**_. –î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –≤ —Ñ–∞–π–ª–µ _/etc/default/grub_ –∏–∑–º–µ–Ω–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é "**GRUB\_CMDLINE\_LINUX**".&#x20;

```shell
GRUB_CMDLINE_LINUX="nvidia_drm.modeset=1"
```

–ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å–∏—Å—Ç–µ–º—ã —Å —É—á–µ—Ç–æ–º –Ω–æ–≤—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π.

```shell
sudo mkinitcpio -P linux
```

## –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º Nvidia

–ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º —Å–∫–∞—á–∞–π—Ç–µ –º–æ–π —Ñ–∞–π–ª _/etc/pacman.d/hooks/nvidia.hook_. –î–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –Ω—É–∂–µ–Ω, —á—Ç–æ–±—ã –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º –¥—Ä–∞–π–≤–µ—Ä–∞ Nvidia –æ–±–Ω–æ–≤–ª—è–ª–∏—Å—å —á–µ—Ä–µ–∑ pacman.&#x20;

```shell
mkdir /etc/pacman.d/hooks
sudo curl -L "https://raw.githubusercontent.com/ArthurLokhov/dots/main/etc/pacman.d/hooks/nvidia.hook" > /etc/pacman.d/hooks/nvidia.hook
```

–¢–µ–ø–µ—Ä—å —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–æ–Ω—Ñ–∏–≥, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ–ø–∏—Å—ã–≤–∞—Ç—å –Ω–∞—à—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é. –î–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –Ω—É–∂–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã _**X Server**_ —Å Nvidia. –î–ª—è —ç—Ç–æ–≥–æ –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è —É—Ç–∏–ª–∏—Ç–æ–π _**nvidia-xconfig**_.&#x20;

```shell
sudo nvidia-xconfig
```

–¢–∞–∫–∂–µ –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ —Ñ–∞–π–ª –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –≤ –Ω–µ —Å–æ–≤—Å–µ–º —É–¥–æ–±–Ω–æ–º –º–µ—Å—Ç–µ, –Ω–∞–¥–æ –µ–≥–æ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å.

```shell
sudo mv /etc/X11/xorg.conf /etc/X11/xorg.conf.d/20-nvidia.conf
```

## –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–ú–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å _**nvidia-tweaks**_, —á—Ç–æ–±—ã –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ "**Nvidia Settings**" –∏ –¥–æ–±–∞–≤–∏—Ç—å —Ç—É–¥–∞ –Ω–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

```shell
cd ~/Downloads
git clone https://aur.archlinux.org/nvidia-tweaks.git
cd nvidia-tweaks
makepkg -sric
```

## –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ...

–ù–∞–¥–æ –¥–∞—Ç—å –∑–Ω–∞—Ç—å –Ω–∞—à–µ–º—É –∑–∞–≥—Ä—É–∑—á–∏–∫–∞, —á—Ç–æ —É –Ω–∞—Å –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.

```shell
sudo mkinitcpio -P
sudo grub-mkconfig -o /boot/grub/grub.cfg
```

–¢–µ–ø–µ—Ä—å –æ—Å—Ç–∞–ª–æ—Å—å –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è, –∞ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–º–æ–Ω–∞ _**nvidia-persistenced**_.

```shell
sudo reboot
sudo systemctl enable nvidia-persistenced.service
```
